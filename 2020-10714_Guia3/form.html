<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="../2020-10714_Guia3/css/style.css">
    <link rel="shortcut icon" href="https://cdn.icon-icons.com/icons2/2331/PNG/512/working_work_office_business_man_alone_home_icon_142242.png">
    
    <script src="https://smtpjs.com/v3/smtp.js"></script>
    <script type="text/javascript">
		function sendEmail() {
            const userSMPT = "userunknowntesting@gmail.com";
            const passwordSMTP = "ITLA1234";
            const hostSMTP = "smtp.gmail.com";

            const host = hostSMTP;

            const user = userSMTP;
            const password = passwordSMTP;

            const emailTo = document.getElementById("exampleInputEmail").value;
            const passwordTo = document.getElementById("exampleInputPassword").value;
            
            const myImage = document.getElementById("exampleFormControlFile").value;
            
            const manualOpinion = document.getElementById("inlineRadio").value;
            const optionSelected = manualOpinion == "option1" ? "Muy bueno." : manualOpinion == "option2" ? "Bueno." : manualOpinion == "option3" ? "Muy malo." : manualOpinion == "option4" ? "Malo." : "Ninguna opcion."
            
            const noticeMe = document.getElementById("texto").value;
            const updates = noticeMe == "Checked" ? "Avisarme de actualizaciones" : "No avisarme de actualizaciones";

            const body = "Saludos, " + emailTo + 
                "\n\n" +
                "Hemos recibido sus respuestas del formulario llenado, cuyos datos en cuestión son: " +
                "\n" +
                "Correo: \n" +
                "   " + emailTo + "\n"+
                "Contraseña: \n" +
                "   " + password + "\n"+
                "Imagen de presentación: \n" +
                "   [Adjunto más abajo]\n"+
                "El manual le ha parecido: \n" +
                "   " + optionSelected + "\n"+
                "Recibir notificación de: \n" +
                "   " + updates + "\n\n\n"+
                "Eso es todo lo recibido, es cuanto \n\n 'Jorge Sepúlveda'";                
                
            try {
                Email.send({
				Host: host,
				Username : user,
				Password : password,
				To : emailTo,
				From : user,
				Subject : "Form's response",
				Body : body,
                Attachments : [
                {
                    name : "Desde(" + emailTo + ").png",
                    path: myImage
                }]
            }).then(
                message => alert("Correo enviado correctamente.")
            );
            } catch (error) {
                alert(ErrorEvent.name)
            }
			
		}
	</script>
    
    <title>Form</title>
</head>
<body class="bg-dark">
    <header class="blur-bg">
        <div>
            <nav class="navbar">
                <a class="navbar-brand disabled" href="#">
                    <h1>
                        <b class="aesthetic-tittle text-white">
                            &#60;Form/&#62;
                        </b>
                    </h1>
                </a>
                <ul class="nav justify-content-end">
                    <li class="nav-item">
                        <a class="nav-link text-white font-simple" href="/home.html"><b>Id Card</b> </a>
                      </li>
                    <li class="nav-item">
                        <a class="nav-link text-white font-simple" href="/home.html"><b>Guia 2 - Guia 3</b> </a>
                    </li>
                  </ul>
            </nav>
        </div>
    </header>

    <div id="formSpace" class=" blur-bg container">
        <div>
            <form method="post">
                <!-- Parte de log in -->
                <div class="form-group aesthetic-simple">
                  <label for="exampleInputEmail">Email</label>
                  <input type="email" class="form-control" id="exampleInputEmail" aria-describedby="emailHelp" placeholder="Aquí su correo" required>
                  <small id="emailHelp" class="form-text text-muted">This is just a test of an email handler module, please, put a real and accessible one.</small>
                </div>
                <div class="form-group aesthetic-simple">
                  <label for="exampleInputPassword">Password</label>
                  <input type="password" class="form-control" id="exampleInputPassword" placeholder="Aquí su contraseña" required>
                </div>
    
                <!-- Envíame una foto tuya -->
                <div class="form-group aesthetic-simple">
                    <label for="exampleFormControlFile">Envíame una foto tuya:</label>
                    <input type="file" class="form-control-file" id="exampleFormControlFile" accept="image/png">
                </div>
                
                <!-- Este manual te parece: muy bueno, bueno, malo, muy malo -->
                <label class=" aesthetic-simple" for="#">Este manual te parece:</label> <br>
                <div class="form-check form-check-inline aesthetic-simple">
                    <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio" value="option1">
                    <label class="form-check-label" for="inlineRadio">1. Muy bueno.</label>
                </div>
                <div class="form-check form-check-inline aesthetic-simple">
                    <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio" value="option2">
                    <label class="form-check-label" for="inlineRadio">2. Bueno</label>
                </div>
                <div class="form-check form-check-inline aesthetic-simple">
                    <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio" value="option3">
                    <label class="form-check-label" for="inlineRadio">3. Muy malo.</label>
                </div>
                <div class="form-check form-check-inline aesthetic-simple">
                    <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio" value="option4">
                    <label class="form-check-label" for="inlineRadio">4. Malo.</label>
                </div>
                
                <!-- Avisarme de actualizaciones -->
                <div class="form-check aesthetic-simple">
                    <br>
                  <input type="checkbox" class="form-check-input" id="exampleCheck">
                  <label class="form-check-label" for="exampleCheck">Avisarme de actualizaciones</label>
                </div>
                
                <!-- Botón para submit/borrar -->
                <div class=" btn-group">
                    <button id="button1" type="submit" class="btn btn-light text-dark aesthetic-simple" onclick="sendEmail()">Enviar</button>
                    <button id="button2" type="button" class="btn btn-dark aesthetic-simple" onclick="location.reload()">Borrar</button>
                </div>
            </form>
        </div>
        <br>
    </div>

    <footer class="flex-shrink-0 py-md-3 blur-bg  text-center text-white">
        <div class="container">
          <small><b class="aesthetic-simple">&#169;Derechos reservados -  Jorge Luis Sepúlveda Abreu - 2020-10714.</b></small>
        </div>
    </footer>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
</body>
</html>